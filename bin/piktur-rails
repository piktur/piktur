#!/usr/bin/env ruby
# frozen_string_literal: true

# This command will automatically be run when you run "rails" with Rails gems
# installed from the root of your application.

begin
  load File.expand_path('./piktur-spring', __dir__)
rescue LoadError => e
  load File.expand_path('./piktur-env', __dir__)
  raise unless e.message.include?('spring')
end

# Set up gems listed in the Gemfile.
ENV['BUNDLE_GEMFILE'] ||= File.join(Object.const_get(:ENGINE_ROOT), 'Gemfile')
require 'bundler/setup' if File.exist?(ENV['BUNDLE_GEMFILE'])

APP_ROOT ||= File.join(Object.const_get(:ENGINE_ROOT), 'spec/dummy')
APP_PATH ||= File.join(APP_ROOT, 'config/application')

require APP_PATH
require 'rails/commands'
